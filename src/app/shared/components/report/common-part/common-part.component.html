<!--
<div>
    <button (click)="addProject()">Add project</button>
    <div class="project" *ngFor="let project of form.controls; let i = index">
      <ng-container>
        <app-form-input [placeHolder]="'Название проекта'" [control]="project.get('name')"></app-form-input>

        <button (click)="addEmployee(project)">Add Employee</button>
        <div *ngFor="let empl of project.controls.employee.controls; let ie = index">
          <app-form-input [placeHolder]="'Имя сотрудника'" [control]="empl.get('name')"></app-form-input>

          <div *ngFor="let task of empl.controls.tasks.controls; let ie = index">
            <app-form-input [placeHolder]="'Задача'" [control]="task.get('name')"></app-form-input>
            <app-form-input [placeHolder]="'Количество часов'" [control]="task.get('hours')"></app-form-input>

            <input [formControl]="task.get('date')" type="date" id="start" name="trip-start">
          </div>
          <button (click)="addTask(empl)">Add Task</button>
        </div>
      </ng-container>
    </div>
</div>
-->

<div class="grid">
  <div class="project-item" *ngFor="let project of form.controls; let i = index">
    <app-form-input [placeHolder]="'Название проекта'" [control]="project.get('name')"></app-form-input>
    <app-icon-button [color]="'dark'" [size]="'size-small'" [iconType]="'person_add'" [title]="'Добавить сотрудника'" (click)="addEmployee(project)" class="btn-icon"></app-icon-button>
    <app-icon-button [color]="'dark'" [size]="'size-small'" [iconType]="'delete'" [title]="'Удалить проект'" (click)="deleteProject(i)" class="btn-icon"></app-icon-button>

    <div class="employees">
      <div class="employee-item" *ngFor="let empl of project.controls.employee.controls; let ie = index">
       <div class="employee-name-row">
          <app-form-input [placeHolder]="'Имя сотрудника'" [control]="empl.get('name')"></app-form-input>
          <app-icon-button [color]="'dark'" [size]="'size-small'" [iconType]="'add'" [title]="'Добавить задачу'" (click)="addTask(empl)" class="btn-icon"></app-icon-button>
          <app-icon-button [color]="'dark'" [size]="'size-small'" [iconType]="'delete'" [title]="'Удалить сотрудника'" (click)="deleteEmployee(project, ie)" class="btn-icon"></app-icon-button>
       </div>

        <div class="tasks-list">
          <div class="task-item" *ngFor="let task of empl.controls.tasks.controls; let ie = index">
            <app-form-input class="input-task-name" [placeHolder]="'Задача'" [control]="task.get('name')"></app-form-input>
            <app-form-input [placeHolder]="'0'" [control]="task.get('hours')"></app-form-input>
            <input class="input-calendar" [formControl]="task.get('date')" type="date" id="start" name="trip-start">
            <app-icon-button [color]="'dark'" [size]="'size-small'" [iconType]="'delete'" [title]="'Удалить задачу'" (click)="deleteTask(empl, ie)" class="btn-icon"></app-icon-button>
          </div>
        </div>

      </div>
    </div>
  </div>
  <div class="footer">
    <app-icon-button [color]="'dark'" [size]="'size-normal'" [iconType]="'add'" [title]="'Добавить новый проект'" (click)="addProject()" class="btn-icon"></app-icon-button>
    <span>Добавить проект</span>
  </div>
</div>
